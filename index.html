<!doctype html>
<html lang="fr">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Turtle Timer üê¢</title>
    <style>
    body {
        margin:0;
        width: 100%;
        height: 100%;
        background: url("https://i.ibb.co/60D4QHrz/Fond-Horloge.png") no-repeat center center fixed;
        background-size: cover;
        transition:all 0.5s ease-in-out;
        overflow: hidden;
    }

    .mode {
        margin:0;
        width: 100vw;
        height: 100vh;
        display:flex;
        align-items:center;
        justify-content:center;
    }

    img {
        position:fixed;
        transition: all 0.5s ease-in-out;
    }
    
    .cadran {
        top: 50vh;
        left: 50vw;
        transform: translate(-50%, -50%);
        width: 75vw;
        aspect-ratio: 7 / 3;
        max-width: 70rem;
        max-height: 30rem;
    }

    .horloge {
        top: 50vh;
        left: 50vw;
        transform: translate(-50%, -50%);
        width: 110vmin;
        aspect-ratio: 1 / 1;
    }

    .clock-components {
        position: fixed;
        width: 110vmin;
        height: auto;
        aspect-ratio: 1/1;
        pointer-events: none;
    }

    .hand {
        position: absolute;
        left: 50%;
        top: 50%;
        transform-origin: 50% 100%;
        border-radius: 4px;
        box-shadow: 0 2px 6px rgba(0,0,0,0.25);
    }

    .hand.hour {
        width: 1.2%;
        height: 20%;
        background: #255240;
    }
    .hand.minute {
        width: 1%;
        height: 30%;
        background: #70f3c1;
    }
    .hand.second {
        width: 0.8%;
        height: 35%;
        background: #ff3b3b;
    }

    .Button {
        position:fixed;
        top:0;
        margin:1em;
        padding:0.5em 1em;
        border-radius:4px;
        border:1px solid #fff;
        background-color:transparent;
        color:#fff;
        font-size:1.5vw;
        cursor: pointer;
        transition: all 0.5s ease-in-out;
        z-index: 9;
    }

    .Button:hover {
        background-color:rgba(255,255,255,0.1);
        border-color:rgba(255,255,255,0.5);
        transform: translateX(0.4vw);
    }

    .Button.Clock.ToggleButton {
        right: 22vw;
        width: 13vw;
    }

    .Button.Clock.SecondsButton {
        right:0;
        width: 20vw;
    }

    .Button.Chrono.Start-Stop {
        right: 15vw;
        width: 13vw;
    }

    .Button.Chrono.Reset {
        right: 0;
        width: 13vw;
    }

    .Button.Timer.Start-Stop {
        right: 15vw;
        width: 13vw;
    }

    .Button.Timer.Reset {
        right: 0;
        width: 13vw;
    }

    .clock-digital, .chrono-digital, .timer-digital {
        position: absolute;
        top: 50%;
        left: 50%;
        font-family: monospace;
        transform: translate(-50%, -50%);
        color: #255240;
        text-shadow: 0 2px 2px rgba(0,0,0,0.25);
        pointer-events: none;
    }

    .hand, .clock-digital, .chrono-digital, .timer-digital {
        transition: opacity 0.5s ease-in-out;
    }

    .hide {
        opacity: 0;
        pointer-events: none;
    }

    .show {
        opacity: 1;
    }

    .sidebar {
        position: fixed;
        top: 0;
        left: 0;
        width: 15vw;
        height: 100%;
        background: rgba(37, 82, 64, 0.9);
        display: flex;
        flex-direction:column;
        gap: 1em;
        padding: 2em 1em;
        transition: all 0.5s ease-in-out;
        z-index: 10;
        align-items: stretch;
        transform: translateX(-100%);
    }

    .sidebar button {
        width: 100%;
        padding: 1em;
        border: 1px solid #fff;
        border-radius: 8px;
        color: #fff;
        font-size: 1.5vw;
        background: transparent;
        cursor: pointer;
        transition: all 0.5s ease-in-out;
    }
    .sidebar button:hover {
        background: rgba(255,255,255,0.1);
        border-color:rgba(255,255,255,0.5);
        transform: translateX(0.4vw);
    }

    .sidebar.open {
        transform: translateX(0);
    }

    .sidebar-toggle {
        position: fixed;
        top: 3vh;
        left: 1.5vw;
        z-index: 20;
        background: #255240;
        color: #fff;
        border: none;
        padding: 0.5em 1em;
        font-size: 1.5vw;
        cursor: pointer;
        border-radius: 4px;
        transition: all 0.5s ease-in-out;
    }

    .sidebar-toggle:hover {
        background-color:#427e66;
    }

    .mode {
        transition: all 0.5s ease-in-out;
    }
    .mode.show {
        visibility: visible;
        pointer-events:all;
    }
    .mode.hide {
        visibility: hidden;
        pointer-events:none;
    }
    </style>
</head>
<body>
    <div id="mode-clock" class="mode clock show">
        <button onclick="Clock.displaySeconds()" class="Button Clock SecondsButton" id="SecondsButton">Afficher les secondes</button>
        <button onclick="Clock.toggleType()" class="Button Clock ToggleButton" id="ToggleButton">Analogique</button>

        <img id="clock-cadran" class="cadran show" src="https://i.ibb.co/Xxh33tMG/Cadran.png" alt="">
        <img id="clock-horloge" class="horloge hide" src="https://i.ibb.co/qv3d3zF/Horloge.png" alt="">
        
        <div class="clock-components">
            <div class="hand second hide" id="second"></div>
            <div class="hand minute hide" id="minute"></div>
            <div class="hand hour hide" id="hour"></div>
            <div class="clock-digital show" id="clock-digital" aria-live="polite" aria-atomic="true">--:--:--</div>
        </div>
    </div>

    <div id="mode-chrono" class="mode chrono hide">
        <button onclick="" class="Button Chrono Start-Stop" id="StartStopButton">D√©marrer</button>
        <button onclick="" class="Button Chrono Reset" id="ResetButton">R√©initialiser</button>

        <img id="chrono-cadran" class="cadran" src="https://i.ibb.co/Xxh33tMG/Cadran.png" alt="">
        
        <div class="chrono-components">
            <div class="chrono-digital" id="chrono-digital" aria-live="polite" aria-atomic="true">--:--:--</div>
        </div>
    </div>

    <div id="mode-timer" class="mode timer hide">
        <button onclick="" class="Button Timer Start-Stop" id="Button1">Bouton 1</button>
        <button onclick="" class="Button Timer Reset" id="Button2">Bouton 2</button>

        <img id="timer-cadran" class="cadran" src="https://i.ibb.co/Xxh33tMG/Cadran.png" alt="">
        
        <div class="timer-components">
            <div class="timer-digital" id="timer-digital" aria-live="polite" aria-atomic="true">--:--:--</div>
        </div>
    </div>


    <div class="sidebar" id="sidebar">
        <button onclick="Sidebar.selectMode('clock')">Horloge</button>
        <!--- <button onclick="Sidebar.selectMode('chrono')">Chrono</button>
        <button onclick="Sidebar.selectMode('timer')">Minuteur</button> --->
    </div>

    <button id="sidebar-toggle" class="sidebar-toggle" onclick="Sidebar.toggle()">‚ò∞</button>
    <script>
        /* ----------------- Helpers ----------------- */
        function setVisibility(el, show) {
            if (show) {
                el.classList.add("show");
                el.classList.remove("hide");
            } else {
                el.classList.add("hide");
                el.classList.remove("show");
            }
        }

        function pad(n){ return n.toString().padStart(2,'0'); }

        /* ----------------- Clock Module ----------------- */
        const Clock = (() => {
            const $hour = document.getElementById('hour');
            const $minute = document.getElementById('minute');
            const $second = document.getElementById('second');
            const $digital = document.getElementById('clock-digital');
            const $cadran = document.getElementById('clock-cadran');
            const $horloge = document.getElementById('clock-horloge');

            let showSeconds = false;

            function update() {
                const now = new Date();
                const hh = now.getHours();
                const mm = now.getMinutes();
                const ss = now.getSeconds();
                const ms = now.getMilliseconds();

                const secAngle = (ss + ms/1000) * 6;
                const minAngle = (mm + ss/60 + ms/(60*1000)) * 6;
                const hourAngle = ((hh % 12) + mm/60 + ss/(60*60) + ms/(60*60*1000)) * 30;

                $second.style.transform = `translate(-50%,-100%) rotate(${secAngle}deg)`;
                $minute.style.transform = `translate(-50%,-100%) rotate(${minAngle}deg)`;
                $hour.style.transform   = `translate(-50%,-100%) rotate(${hourAngle}deg)`;

                if (showSeconds) {
                    if ($hour.classList.contains("show")) {
                        setVisibility($second, true);
                    }
                    $digital.style.fontSize = "12vw";
                    $digital.textContent = `${pad(hh)}:${pad(mm)}:${pad(ss)}`;
                } else {
                    setVisibility($second, false);   
                    $digital.style.fontSize = "20vw";
                    $digital.textContent = `${pad(hh)}:${pad(mm)}`;
                }
            }

            function loop() { 
                update(); 
                requestAnimationFrame(loop); 
            }

            function toggleType() {
                const btn = document.getElementById('ToggleButton');
                btn.disabled = true;

                if (btn.innerHTML === "Num√©rique") {
                    btn.innerHTML = "Analogique";
                    setVisibility($hour,false);
                    setVisibility($minute,false);
                    setVisibility($second,false);
                    setTimeout(() => { setVisibility($cadran,true); setVisibility($horloge,false); }, 400);
                    setTimeout(() => { setVisibility($digital,true); }, 1000);
                } else {
                    btn.innerHTML = "Num√©rique";
                    setVisibility($digital,false);
                    setTimeout(() => { setVisibility($cadran,false); setVisibility($horloge,true); }, 400);
                    setTimeout(() => { setVisibility($hour,true); setVisibility($minute,true); setVisibility($second,true); }, 1000);
                }

                setTimeout(() => btn.disabled = false, 2000);
            }

            function displaySeconds() {
                const btn = document.getElementById('SecondsButton');
                btn.disabled = true;

                btn.innerHTML = showSeconds ? "Afficher les secondes" : "Cacher les secondes";

                if ($digital.classList.contains("show")) {
                    setVisibility($digital, false);
                    setTimeout(() => {
                        setVisibility($digital, true);
                        showSeconds = !showSeconds;
                    }, 500);
                } else {
                    showSeconds = !showSeconds;
                }

                setTimeout(() => btn.disabled = false, 1000);
            }

            /* Initialisation */
            loop();

            return { toggleType, displaySeconds };
        })();

        /* ----------------- Chrono Module ----------------- */
        const Chrono = (() => {
            const $cadran = document.getElementById('chrono-cadran');
            const $digital = document.getElementById('chrono-digital');
            const $startStop = document.getElementById('StartStopButton');
            const $reset = document.getElementById('ResetButton');

            function update() {
                const now = new Date();
                const hh = now.getHours();
                const mm = now.getMinutes();
                const ss = now.getSeconds();
                const ms = now.getMilliseconds();

                $digital.style.fontSize = "12vw";
                $digital.textContent = `${pad(hh)}:${pad(mm)}:${pad(ss)}`;
            }

            function loop() { 
                update(); 
                requestAnimationFrame(loop); 
            }

            /* Initialisation */
            loop();

            return {  };
        })();

        /* ----------------- Timer Module ----------------- */
        const Timer = (() => {
            const $cadran = document.getElementById('timer-cadran');
            const $digital = document.getElementById('timer-digital');
            const $startStop = document.getElementById('Button1');
            const $reset = document.getElementById('Button2');

            function update() {
                const now = new Date();
                const hh = now.getHours();
                const mm = now.getMinutes();
                const ss = now.getSeconds();
                const ms = now.getMilliseconds();

                $digital.style.fontSize = "12vw";
                $digital.textContent = `${pad(hh)}:${pad(mm)}:${pad(ss)}`;
            }

            function loop() { 
                update(); 
                requestAnimationFrame(loop); 
            }

            /* Initialisation */
            loop();

            return {  };
        })();

        /* ----------------- Sidebar Module ----------------- */
        const Sidebar = (() => {
            const sidebar = document.getElementById('sidebar');
            const toggleBtn = document.getElementById('sidebar-toggle');

            function toggle() {
                sidebar.classList.toggle("open");
                toggleBtn.style.left = sidebar.classList.contains("open")
                    ? sidebar.offsetWidth + 20 + "px"
                    : "1.5vw";
            }

            function selectMode(mode) {
                toggle();
                document.querySelectorAll('.mode').forEach(m => setVisibility(m,false));
                setVisibility(document.getElementById("mode-" + mode), true);
                console.log(mode);
            }

            window.addEventListener("resize", () => {
                if (sidebar.classList.contains("open")) toggle();
            });

            return { toggle, selectMode };
        })();
    </script>
</body>
</html>
