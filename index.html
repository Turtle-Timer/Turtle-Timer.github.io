<!doctype html>
<html lang="fr">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Turtle Timer üê¢</title>
    <style>
    body {
        min-height:100vh;
        margin:0;
        display:flex;
        align-items:center;
        justify-content:center;
        background: url("https://i.ibb.co/60D4QHrz/Fond-Horloge.png") no-repeat center center fixed;
        background-size: cover;
        transition:all 0.5s ease-in-out;
        overflow: hidden;
        height: 100%;
    }

    .container {
        display:flex;
        flex-direction:column;
        gap:1.25rem;
        align-items:center;
        position: relative;
    }

    img {
        position:fixed;
        transition: all 0.5s ease-in-out;
    }
    
    .cadran {
        width: 50em;
        height: 25em
    }
    
    .horloge {
        width: 50em;
        height: 50em;
    }

    .hand {
        position:absolute;
        left:50%;
        top:50%;
        transform-origin: 50% 100%;
        border-radius:4px;
        box-shadow: 0 2px 6px rgba(0,0,0,0.25);
    }

    .hand.hour {
        width:8px;
        height:11rem;
        background:#255240;
    }
    .hand.minute {
        width:8px;
        height:14.9rem;
        background:#70f3c1;
    }
    .hand.second {
        width:8px;
        height:17.5rem;
        background:#ff3b3b;
    }
    .clock {
        position: relative;
    }

    button {
        position:fixed;
        top:0;
        margin:1em;
        padding:0.5em 1em;
        border-radius:4px;
        border:1px solid #fff;
        background-color:transparent;
        color:#fff;
        font-size:1.25rem;
        cursor: pointer;
        transition: all 0.5s ease-in-out;
    }

    button:hover {
        background-color:rgba(255,255,255,0.1);
        border-color:rgba(255,255,255,0.5);
        transform: translateX(0.2em);
        
    }

    .ToggleButton {
        left:0;
    }

    .SecondsButton {
        right:0;
    }

    .digital {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        font-family: monospace;
        color: #255240;
        text-shadow: 0 2px 2px rgba(0,0,0,0.25);
        pointer-events: none;
    }

    .hand, .digital {
        transition: opacity 0.5s ease;
    }

    .hide {
        opacity: 0;
        pointer-events: none;
    }

    .show {
        opacity: 1;
    }
    </style>
</head>
<body>
    <img class="cadran show" src="https://i.ibb.co/Xxh33tMG/Cadran.png" alt="">
    <img class="horloge hide" src="https://i.ibb.co/qv3d3zF/Horloge.png" alt="">
    <button onclick="ToggleType()" class="ToggleButton" id="ToggleButton">Analogique</button>
    <button onclick="DisplaySeconds()" class="SecondsButton" id="SecondsButton">Afficher les secondes</button>
    <div class="digital show" id="digital" aria-live="polite" aria-atomic="true">--:--:--</div>
    <main class="container">
        <div class="clock">
            <div class="hand second hide" id="second"></div>
            <div class="hand minute hide" id="minute"></div>
            <div class="hand hour hide" id="hour"></div>
        </div>
    </main>

<script>
    const $hour   = document.getElementById('hour');
    const $minute = document.getElementById('minute');
    const $second = document.getElementById('second');
    const $digital = document.getElementById('digital');

    const $body   = document.body;

    const $cadran = document.querySelector('.cadran');
    const $horloge = document.querySelector('.horloge');
    let showSeconds = false;

    (function(){

        function pad(n){ return n.toString().padStart(2,'0'); }

        function update(){
            const now = new Date();

            const hh = now.getHours();
            const mm = now.getMinutes();
            const ss = now.getSeconds();
            const ms = now.getMilliseconds();
            
            const secAngle = (ss + ms/1000) * 6;
            const minAngle = (mm + ss/60) * 6;
            const hourAngle = ((hh % 12) + mm/60) * 30;

            $second.style.transform = `translate(-50%,-100%) rotate(${secAngle}deg)`;
            $minute.style.transform = `translate(-50%,-100%) rotate(${minAngle}deg)`;
            $hour.style.transform   = `translate(-50%,-100%) rotate(${hourAngle}deg)`;
            if (showSeconds) {
                if ($hour.classList.contains("show")) {
                    toggle($second, true);
                }
                $digital.style.fontSize = "9rem";
                $digital.textContent = `${pad(hh)}:${pad(mm)}:${pad(ss)}`;
            } else {
                toggle($second, false);   
                $digital.style.fontSize = "14rem";
                $digital.textContent = `${pad(hh)}:${pad(mm)}`;
            }
        }

        function loop(){
            update();
            requestAnimationFrame(loop);
        }
        requestAnimationFrame(loop);
    })();

    function toggle(el, show) {
        if (show) {
            el.classList.add("show");
            el.classList.remove("hide");
        } else {
            el.classList.add("hide");
            el.classList.remove("show");
        }
    }

    function ToggleType() {
        const buttontoggle  = document.getElementById('ToggleButton');
        buttontoggle.disabled = true;
        if (buttontoggle.innerHTML === "Num√©rique") {
            buttontoggle.innerHTML = "Analogique";
            toggle($hour, false);
            toggle($minute, false);
            toggle($second, false);

            setTimeout(() => {
                toggle($cadran, true);
                toggle($horloge, false);
            }, 400);

            setTimeout(() => {
                toggle($digital, true);
            }, 1000);
        } else {
            buttontoggle.innerHTML = "Num√©rique";
            toggle($digital, false);

            setTimeout(() => {
                toggle($cadran, false);
                toggle($horloge, true);
            }, 400);

            setTimeout(() => {
                toggle($hour, true);
                toggle($minute, true);
                toggle($second, true);
            }, 1000);
        }

        setTimeout(() => {
            buttontoggle.disabled = false;
        }, 2000);
    }

    function DisplaySeconds() {
        const buttonseconds  = document.getElementById('SecondsButton');
        buttonseconds.disabled = true;
        if (showSeconds === false) {
            buttonseconds.innerHTML = "Cacher les secondes";
            if ($digital.classList.contains("show")) {
                toggle($digital, false);
                setTimeout(() => {
                    showSeconds = true;
                    toggle($digital, true);
                }, 500);
            } else {
                showSeconds = true;
            }
        } else {
            buttonseconds.innerHTML = "Afficher les secondes";
            if ($digital.classList.contains("show")) {
                toggle($digital, false);
                setTimeout(() => {
                    showSeconds = false;
                    toggle($digital, true);
                }, 500);
            } else {
                showSeconds = false;
            }
        }

        setTimeout(() => {
            buttonseconds.disabled = false;
        }, 1000);
    }
</script>
</body>
</html>


